<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASL.ai | Real-time Sign Language Recognition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-accent: #3b82f6;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --bg-accent: #3b82f6;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #374151;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .video-container {
            position: relative;
            width: 100%;
            max-width: 640px;
            margin: 0 auto;
            aspect-ratio: 4 / 3;
            background-color: #111827;
        }
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(0,0,0,0.5);
            color: white;
            font-size: 1.25rem;
            border-radius: 0.75rem;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px var(--shadow-color);
        }
        .nav-link {
            position: relative;
            padding-bottom: 4px;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: var(--bg-accent);
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: #3B82F6;
            transition: width 0.3s ease;
        }
        .nav-link:hover::after {
            width: 100%;
        }
        .alphabet-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
        }
        .alphabet-card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px var(--shadow-color);
        }
        /* Chatbot Styles */
        #chatbot-container {
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
        }
        #chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        #chat-messages::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }
        #chat-messages::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }
        #chat-messages::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        .theme-toggle:hover {
            background: var(--border-color);
        }

        /* Fixed Navigation */
        .nav-fixed {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: var(--bg-primary);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 1px 3px var(--shadow-color);
        }

        /* Mobile menu improvements */
        .mobile-menu-fixed {
            position: fixed;
            top: 73px;
            left: 0;
            right: 0;
            z-index: 999;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        /* Section backgrounds */
        .section-primary {
            background-color: var(--bg-primary);
        }
        
        .section-secondary {
            background-color: var(--bg-secondary);
        }

        /* Card styles */
        .card-primary {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        .card-secondary {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
        }

        /* Text styles */
        .text-primary {
            color: var(--text-primary);
        }

        .text-secondary {
            color: var(--text-secondary);
        }

        /* Button styles */
        .btn-primary {
            background-color: var(--bg-accent);
            color: white;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #2563eb;
        }

        /* Modal styles */
        .modal-content {
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        /* Footer override */
        .footer-dark {
            background-color: #1f2937 !important;
            color: #f9fafb !important;
        }

        /* Chat message styles */
        .chat-message-bot {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
        }

        /* Input styles */
        .input-primary {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .input-primary:focus {
            border-color: var(--bg-accent);
            outline: none;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="text-primary">
    <!-- Navigation -->
    <nav id="main-nav" class="nav-fixed backdrop-blur-md">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="text-3xl font-bold text-blue-600">ASL.ai</div>
                <div class="hidden md:flex space-x-6 items-center">
                    <a href="#home" class="nav-link font-medium">Home</a>
                    <a href="#features" class="nav-link font-medium">Features</a>
                    <a href="#try" class="nav-link font-medium">Try It</a>
                    <a href="#practice" class="nav-link font-medium">Practice</a>
                    <a href="#guide" class="nav-link font-medium">Guide</a>
                    <a href="#about" class="nav-link font-medium">About</a>
                    <button id="theme-toggle" class="theme-toggle p-2 rounded-lg transition-all duration-300">
                        <svg id="sun-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <svg id="moon-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                        </svg>
                    </button>
                </div>
                <div class="md:hidden flex items-center space-x-2">
                    <button id="theme-toggle-mobile" class="theme-toggle p-2 rounded-lg transition-all duration-300">
                        <svg id="sun-icon-mobile" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <svg id="moon-icon-mobile" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                        </svg>
                    </button>
                    <button id="mobile-menu-button" class="focus:outline-none text-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="mobile-menu-fixed hidden md:hidden">
        <div class="container mx-auto px-6 py-4 flex flex-col space-y-4">
             <a href="#home" class="nav-link block text-center">Home</a>
             <a href="#features" class="nav-link block text-center">Features</a>
             <a href="#try" class="nav-link block text-center">Try It</a>
             <a href="#practice" class="nav-link block text-center">Practice</a>
             <a href="#guide" class="nav-link block text-center">Guide</a>
             <a href="#about" class="nav-link block text-center">About</a>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="home" class="py-24 md:py-32 section-primary" style="margin-top: 73px;">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-4xl md:text-6xl font-bold text-primary leading-tight mb-6">ASL Alphabet Detection</h1>
            <p class="text-lg md:text-xl text-secondary mb-10 max-w-3xl mx-auto">Our advanced AI model recognizes ASL letters, helping bridge communication gaps and providing a fun way to practice with AI-powered features.</p>
            <a href="#try" class="btn-primary font-bold py-3 px-8 rounded-full transition duration-300 inline-block text-lg shadow-lg hover:shadow-xl">Try It Now</a>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-20 section-secondary">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center text-primary mb-16">Key Features</h2>
            <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="feature-card card-primary p-8 rounded-xl transition duration-300">
                    <div class="text-blue-600 mb-4"><svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div>
                    <h3 class="text-xl font-bold mb-3 text-primary">Real-time Detection</h3><p class="text-secondary">Our model processes your video feed to provide instant ASL letter recognition with minimal latency.</p>
                </div>
                <div class="feature-card card-primary p-8 rounded-xl transition duration-300">
                    <div class="text-blue-600 mb-4"><svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                    <h3 class="text-xl font-bold mb-3 text-primary">‚ú® AI How-to Guides</h3><p class="text-secondary">Stuck on a letter? Get simple, AI-generated step-by-step instructions on how to perform any sign in the alphabet.</p>
                </div>
                <div class="feature-card card-primary p-8 rounded-xl transition duration-300">
                    <div class="text-blue-600 mb-4"><svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                    <h3 class="text-xl font-bold mb-3 text-primary">Interactive Practice</h3><p class="text-secondary">Learn and practice the ASL alphabet with guided exercises and instant feedback.</p>
                </div>
                 <div class="feature-card card-primary p-8 rounded-xl transition duration-300">
                    <div class="text-blue-600 mb-4"><svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div>
                    <h3 class="text-xl font-bold mb-3 text-primary">AI Helper Chatbot</h3><p class="text-secondary">Have questions? Our friendly AI chatbot is here to provide help and guidance about ASL.ai.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Try Yourself Section -->
    <section id="try" class="py-20 section-primary">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center text-primary mb-6">Freeform Practice</h2>
            <p class="text-lg text-center text-secondary mb-12 max-w-3xl mx-auto">Use this space to practice any letter you want. Our model will try to recognize it in real-time.</p>
            <div class="card-secondary rounded-2xl p-6 md:p-10 max-w-5xl mx-auto">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="video-container rounded-xl overflow-hidden shadow-lg">
                        <video id="webcam-freeform" autoplay playsinline class="w-full h-full object-cover" style="display: none; transform: scaleX(-1);"></video>
                        <div id="webcam-placeholder-freeform" class="video-overlay rounded-lg">
                            <div id="start-view-freeform" class="text-center p-6">
                                <svg class="w-16 h-16 mx-auto mb-4 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                                <p class="mb-4">Click the button to start your webcam.</p>
                                <button id="start-webcam-freeform" class="btn-primary font-bold py-3 px-8 rounded-full transition duration-300">Start Webcam</button>
                            </div>
                        </div>
                    </div>
                    <div id="detection-results" class="card-primary p-6 rounded-lg w-full text-center">
                        <h3 class="text-xl font-bold text-primary mb-4">Detection Results</h3>
                        <div class="flex justify-center items-center mb-4">
                            <div class="bg-blue-100 rounded-full w-28 h-28 flex items-center justify-center border-4 border-blue-200"><span id="detected-letter" class="text-6xl font-bold text-blue-600">-</span></div>
                        </div>
                        <p id="confidence" class="text-secondary mb-4">Confidence: <span class="font-bold">0%</span></p>
                        <p class="text-sm text-secondary">Sign ASL letters A-Z clearly with one hand in view.</p>
                        <button id="stop-webcam-freeform" class="hidden mt-4 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-full transition duration-300">Stop Webcam</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Practice Section -->
    <section id="practice" class="py-20 section-secondary">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center text-primary mb-6">Letter Practice Mode</h2>
            <p class="text-lg text-center text-secondary mb-12 max-w-3xl mx-auto">Ready to test your skills? We'll show you a letter, and you sign it back. Let's see how you do!</p>
            <div id="letter-practice-controls" class="card-primary rounded-2xl p-6 md:p-10 max-w-5xl mx-auto">
                <div id="practice-start-view" class="text-center">
                     <h3 class="text-2xl font-bold text-primary mb-4">Start a Practice Session</h3>
                     <p class="text-secondary mb-6">Click the button below to begin. Make sure your webcam is enabled!</p>
                     <button id="start-practice" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full transition duration-300">Start Practicing</button>
                </div>
                <div id="practice-area" class="hidden grid md:grid-cols-2 gap-8 items-center">
                    <div class="video-container rounded-xl overflow-hidden shadow-lg">
                        <video id="webcam-practice" autoplay playsinline class="w-full h-full object-cover" style="transform: scaleX(-1);"></video>
                    </div>
                    <div class="text-center">
                        <h3 class="text-xl font-medium text-secondary">Your challenge is to sign the letter:</h3>
                        <p id="challenge-letter" class="text-8xl font-bold text-blue-600 my-4">A</p>
                        <div id="practice-feedback" class="h-6 mt-2 text-lg font-medium">&nbsp;</div>
                        
                        <!-- Accuracy Display -->
                        <div class="mt-4 p-4 card-secondary rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-medium text-secondary">Session Progress:</span>
                                <span id="accuracy-display" class="text-sm font-bold text-blue-600">0/0 (0%)</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="accuracy-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                            <div class="mt-2 text-xs text-secondary">
                                <span>Correct: <span id="correct-count" class="font-medium">0</span></span>
                                <span class="mx-2">‚Ä¢</span>
                                <span>Total: <span id="total-attempts" class="font-medium">0</span></span>
                            </div>
                        </div>
                        
                        <div class="mt-8 flex justify-center space-x-4">
                            <button id="next-letter" class="btn-primary font-bold py-3 px-8 rounded-full transition duration-300">Next Letter</button>
                            <button id="stop-practice" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-full transition duration-300">End Session</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Alphabet Guide Section -->
    <section id="guide" class="py-20 section-primary">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center text-primary mb-6">ASL Alphabet Guide</h2>
            <p class="text-lg text-center text-secondary mb-12 max-w-3xl mx-auto">Use this guide to learn the signs. Click the ‚ÑπÔ∏è button on any letter to get AI-powered instructions!</p>
            <div id="alphabet-grid" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-9 gap-4 text-center"></div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-20 section-secondary">
        <div class="container mx-auto px-6"><div class="max-w-4xl mx-auto space-y-12"><div class="text-center"><h2 class="text-3xl font-bold text-primary mb-4">About Our Project</h2><p class="text-lg text-secondary">We believe communication should be accessible to everyone. Our mission is to bridge the gap between deaf and hearing communities using technology.</p></div><div class="card-primary rounded-xl p-8"><h3 class="text-2xl font-bold text-blue-800 mb-6">Technology Stack</h3><ul class="space-y-4 text-secondary"><li class="flex items-start"><svg class="w-6 h-6 text-green-500 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span><span class="font-semibold">Gemini API:</span> For AI-powered sign instructions and chatbot assistance.</span></li><li class="flex items-start"><svg class="w-6 h-6 text-green-500 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span><span class="font-semibold">TensorFlow.js:</span> For in-browser machine learning execution.</span></li><li class="flex items-start"><svg class="w-6 h-6 text-green-500 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span><span class="font-semibold">MobileNetV2 CNN:</span> A lightweight, powerful model trained on ASL datasets.</span></li><li class="flex items-start"><svg class="w-6 h-6 text-green-500 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span><span class="font-semibold">MediaPipe Hand:</span> For skeleton drawing and feature extraction.</span></li></ul></div></div></div>
    </section>

    <!-- Footer -->
    <footer class="footer-dark py-12">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-2xl font-bold">ASL.ai</h2>
            <p class="mt-2 text-gray-400 mb-6">Bridging communication gaps through technology.</p>
            <div class="border-t border-gray-700 mt-8 pt-8 text-sm text-gray-500"><p>&copy; 2025 ASL.ai Project. All rights reserved.</p></div>
        </div>
    </footer>

    <!-- AI How-to Modal -->
    <div id="ai-guide-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">
        <div class="modal-content rounded-lg shadow-2xl p-6 max-w-md w-full relative flex flex-col max-h-[90vh]">
            <div class="flex-shrink-0">
                <button id="close-modal" class="absolute top-3 right-3 text-secondary hover:text-primary text-2xl leading-none">&times;</button>
                <h3 class="text-2xl font-bold text-blue-600 mb-4">How to Sign: <span id="modal-letter"></span></h3>
            </div>
            <div id="modal-content" class="text-secondary prose overflow-y-auto">Loading...</div>
        </div>
    </div>
    
    <!-- Chatbot Widget -->
    <div id="chatbot-widget" class="fixed bottom-5 right-5 z-50">
        <button id="chatbot-toggle" class="bg-blue-600 text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center hover:bg-blue-700 transition-transform transform hover:scale-110">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
        </button>
        <div id="chatbot-container" class="hidden absolute bottom-20 right-0 w-80 h-96 rounded-lg shadow-xl flex flex-col">
            <div class="flex justify-between items-center p-4 border-b" style="border-color: var(--border-color);">
                <h3 class="font-bold text-primary">ASL.ai Helper</h3>
                <button id="chatbot-close" class="text-secondary hover:text-primary">&times;</button>
            </div>
            <div id="chat-messages" class="flex-1 p-4 overflow-y-auto flex flex-col space-y-2"></div>
            <div class="p-4 border-t" style="border-color: var(--border-color);">
                <div class="flex space-x-2">
                    <input id="chat-input" type="text" placeholder="Ask me anything about ASL.ai..." class="input-primary flex-1 px-3 py-2 rounded-lg text-sm">
                    <button id="chat-send" class="btn-primary px-4 py-2 rounded-lg text-sm">Send</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- DOM Elements ---
            const startWebcamBtnFreeform = document.getElementById('start-webcam-freeform');
            const stopWebcamBtnFreeform = document.getElementById('stop-webcam-freeform');
            const webcamFreeform = document.getElementById('webcam-freeform');
            const startViewFreeform = document.getElementById('start-view-freeform');
            const detectedLetterEl = document.getElementById('detected-letter');
            const confidenceEl = document.getElementById('confidence');
            const themeToggle = document.getElementById('theme-toggle');
            const themeToggleMobile = document.getElementById('theme-toggle-mobile');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const alphabetGrid = document.getElementById('alphabet-grid');
            const startPracticeBtn = document.getElementById('start-practice');
            const stopPracticeBtn = document.getElementById('stop-practice');
            const practiceStartView = document.getElementById('practice-start-view');
            const practiceArea = document.getElementById('practice-area');
            const webcamPractice = document.getElementById('webcam-practice');
            const challengeLetterEl = document.getElementById('challenge-letter');
            const practiceFeedbackEl = document.getElementById('practice-feedback');
            const nextLetterBtn = document.getElementById('next-letter');
            const aiGuideModal = document.getElementById('ai-guide-modal');
            const closeModalBtn = document.getElementById('close-modal');
            const modalLetterEl = document.getElementById('modal-letter');
            const modalContentEl = document.getElementById('modal-content');
            const chatbotToggle = document.getElementById('chatbot-toggle');
            const chatbotContainer = document.getElementById('chatbot-container');
            const chatbotClose = document.getElementById('chatbot-close');
            const chatMessages = document.getElementById('chat-messages');
            const chatInput = document.getElementById('chat-input');
            const chatSend = document.getElementById('chat-send');

            // --- State Variables ---
            let detectionInterval;
            let stream;
            let currentChallengeLetter = '';
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const priorityLetters = ['A', 'C', 'O', 'L', 'Z', 'E', 'N', 'S', 'Q', 'X', 'I'];
            let practiceSet = [];
            let chatHistory = [];

            // --- Gemini API ---
            const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyAKOuaW2ngqJWy1bF5_E6rLXBEUM8Bc9rU`;

            async function callGemini(prompt, currentChatHistory = []) {
                const systemPrompt = `You are ASL.ai Helper, a friendly and knowledgeable chatbot embedded in the ASL.ai website. Your purpose is to answer questions specifically about this website and its features.

                Here is the context about the ASL.ai website:
                - **Content:** The website currently only teaches and detects the 26 letters of the American Sign Language (ASL) alphabet. It does NOT recognize full words or phrases yet.
                - **Features:** It has a 'Freeform Practice' section to sign any letter, a 'Practice Mode' with challenges, and a visual 'Alphabet Guide' with images and AI-powered instructions.
                - **Technology:** All AI processing happens directly in the user's browser for privacy. No video is ever sent to a server.
                - **Mission:** The goal of the project is to make learning ASL accessible and fun.

                Answer questions based ONLY on this context. Be friendly, concise, and helpful. If asked about something outside this scope, gently guide the user back to the website's features.`;

                let historyForApi = [...currentChatHistory];
                if (currentChatHistory === chatHistory && historyForApi.length === 0) {
                    historyForApi.push({ role: "user", parts: [{ text: systemPrompt }] });
                    historyForApi.push({ role: "model", parts: [{ text: "Hello! I'm the ASL.ai Helper. How can I help you learn about the features on this site?" }] });
                }
                historyForApi.push({ role: "user", parts: [{ text: prompt }] });
                
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: historyForApi })
                    });
                    if (!response.ok) { throw new Error(`API call failed with status: ${response.status}`); }
                    const data = await response.json();
                    const text = data.candidates[0].content.parts[0].text;
                    if (currentChatHistory === chatHistory) {
                        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                        chatHistory.push({ role: "model", parts: [{ text }] });
                    }
                    return text;
                } catch (error) {
                    console.error("Gemini API call failed:", error);
                    return "Sorry, I'm having a little trouble connecting. Please try again later.";
                }
            }

            // --- Chatbot Functions ---
            function addMessage(text, sender) {
                const messageEl = document.createElement('div');
                messageEl.className = `p-2 my-1 rounded-lg max-w-[85%] ${sender === 'user' ? 'bg-blue-500 text-white self-end' : 'chat-message-bot self-start'}`;
                messageEl.textContent = text;
                chatMessages.appendChild(messageEl);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function addBotMessage(text) {
                addMessage(text, 'bot');
            }

            function addUserMessage(text) {
                addMessage(text, 'user');
            }

            async function handleChatSend() {
                const userInput = chatInput.value.trim();
                if (!userInput) return;
                addUserMessage(userInput);
                chatInput.value = '';
                chatInput.disabled = true;
                const thinkingEl = document.createElement('div');
                thinkingEl.className = 'p-2 my-1 rounded-lg max-w-[85%] chat-message-bot animate-pulse';
                thinkingEl.textContent = '...';
                chatMessages.appendChild(thinkingEl);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                const responseText = await callGemini(userInput, chatHistory);
                chatMessages.removeChild(thinkingEl);
                addBotMessage(responseText);
                chatInput.disabled = false;
                chatInput.focus();
            }

            // --- Main Application Functions ---
            function startWebcam(mode) {
                if (stream) stopWebcam();
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(videoStream => {
                        stream = videoStream;
                        let videoElement = mode === 'practice' ? webcamPractice : webcamFreeform;
                        videoElement.srcObject = stream;
                        videoElement.style.display = 'block';

                        if (mode === 'practice') {
                            practiceArea.classList.remove('hidden');
                            practiceStartView.classList.add('hidden');
                        } else {
                            startViewFreeform.parentElement.style.display = 'none';
                            stopWebcamBtnFreeform.classList.remove('hidden');
                        }
                        if (detectionInterval) clearInterval(detectionInterval);
                        detectionInterval = setInterval(() => detectASL(mode === 'practice'), 1500);
                    })
                    .catch(error => {
                        console.error("Error accessing webcam: ", error);
                        alert("Could not access webcam. Please ensure permissions are granted.");
                    });
            }

            function stopWebcam() {
                if (stream) { stream.getTracks().forEach(track => track.stop()); }
                stream = null;
                clearInterval(detectionInterval);
                webcamFreeform.style.display = 'none';
                if (startViewFreeform.parentElement) startViewFreeform.parentElement.style.display = 'flex';
                stopWebcamBtnFreeform.classList.add('hidden');
                detectedLetterEl.textContent = '-';
                confidenceEl.innerHTML = `Confidence: <span class="font-bold">0%</span>`;
                webcamPractice.srcObject = null;
                practiceArea.classList.add('hidden');
                practiceStartView.classList.remove('hidden');
                practiceFeedbackEl.innerHTML = '&nbsp;';
            }

            function detectASL(isPracticeMode) {
                // Get the active video element
                const videoElement = isPracticeMode ? webcamPractice : webcamFreeform;
                
                // Create a canvas to capture the current frame
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = videoElement.videoWidth;
                canvas.height = videoElement.videoHeight;
                
                // Draw the current video frame to the canvas
                ctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);
                
                // Convert canvas to base64 JPEG
                const imageData = canvas.toDataURL('image/jpeg');
                
                // Send the image to the Flask backend for prediction
                fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ image: imageData })
                })
                .then(response => response.json())
                .then(data => {
                    // Update the UI with the prediction results
                    detectedLetterEl.textContent = data.prediction;
                    const confidencePercent = Math.round(data.confidence * 100);
                    confidenceEl.innerHTML = `Confidence: <span class="font-bold">${confidencePercent}%</span>`;
                    
                    // If in practice mode, check the prediction
                    if (isPracticeMode) {
                        checkPractice(data.prediction, confidencePercent);
                    }
                })
                .catch(error => {
                    console.error('Error making prediction:', error);
                    // Fallback to show error
                    detectedLetterEl.textContent = 'Error';
                    confidenceEl.innerHTML = `Confidence: <span class="font-bold">0%</span>`;
                });
            }

            // --- Practice Session Variables ---
            let practiceStats = {
                correct: 0,
                total: 0,
                currentCorrect: false
            };

            function updateAccuracyDisplay() {
                const accuracy = practiceStats.total > 0 ? Math.round((practiceStats.correct / practiceStats.total) * 100) : 0;
                document.getElementById('accuracy-display').textContent = `${practiceStats.correct}/${practiceStats.total} (${accuracy}%)`;
                document.getElementById('accuracy-bar').style.width = `${accuracy}%`;
                document.getElementById('correct-count').textContent = practiceStats.correct;
                document.getElementById('total-attempts').textContent = practiceStats.total;
            }

            function resetPracticeStats() {
                practiceStats = { correct: 0, total: 0, currentCorrect: false };
                updateAccuracyDisplay();
            }

            function checkPractice(detected, confidence) {
                // Only count this as an attempt if we haven't already gotten this letter correct
                if (!practiceStats.currentCorrect) {
                    practiceStats.total++;
                    
                    if (detected === currentChallengeLetter) {
                        practiceStats.correct++;
                        practiceStats.currentCorrect = true;
                        practiceFeedbackEl.textContent = 'Correct! üéâ';
                        practiceFeedbackEl.className = 'h-6 mt-2 text-lg font-medium text-green-600';
                        if (!practiceSet.includes(currentChallengeLetter)) {
                            practiceSet.push(currentChallengeLetter);
                        }
                    } else {
                        practiceFeedbackEl.textContent = 'Try Again...';
                        practiceFeedbackEl.className = 'h-6 mt-2 text-lg font-medium text-red-600';
                    }
                    
                    updateAccuracyDisplay();
                }
            }

            // --- Theme Toggle Functionality ---
            function initTheme() {
                const savedTheme = localStorage.getItem('theme') || 'light';
                document.documentElement.setAttribute('data-theme', savedTheme);
                updateThemeIcons(savedTheme);
            }

            function toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeIcons(newTheme);
            }

            function updateThemeIcons(theme) {
                const sunIcons = document.querySelectorAll('#sun-icon, #sun-icon-mobile');
                const moonIcons = document.querySelectorAll('#moon-icon, #moon-icon-mobile');
                
                if (theme === 'dark') {
                    sunIcons.forEach(icon => icon.classList.add('hidden'));
                    moonIcons.forEach(icon => icon.classList.remove('hidden'));
                } else {
                    sunIcons.forEach(icon => icon.classList.remove('hidden'));
                    moonIcons.forEach(icon => icon.classList.add('hidden'));
                }
            }

            function setNewChallenge() {
                // Reset the current correct flag for the new challenge
                practiceStats.currentCorrect = false;
                
                let availablePriority = priorityLetters.filter(l => !practiceSet.includes(l));
                let challengePool;
                if (availablePriority.length > 0) {
                    challengePool = availablePriority;
                } else {
                    let availableLetters = Array.from(letters).filter(l => !practiceSet.includes(l));
                    if (availableLetters.length === 0) {
                        practiceSet = [];
                        availableLetters = Array.from(letters);
                    }
                    challengePool = availableLetters;
                }
                currentChallengeLetter = challengePool[Math.floor(Math.random() * challengePool.length)];
                challengeLetterEl.textContent = currentChallengeLetter;
                practiceFeedbackEl.innerHTML = '&nbsp;';
            }

            function populateAlphabetGuide() {
                const iconMap = {
                    'A': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_a-512.png', 'B': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_b-512.png', 'C': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_c-512.png', 'D': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_d-512.png', 'E': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_e-512.png', 'F': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_f-512.png', 'G': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_g-512.png', 'H': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_h-512.png', 'I': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_i-512.png', 'J': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_j-512.png', 'K': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_k-512.png', 'L': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_l-512.png', 'M': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_m-512.png', 'N': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_n-512.png', 'O': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_o-512.png', 'P': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_p-512.png', 'Q': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_q-512.png', 'R': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_r-512.png', 'S': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_s-512.png', 'T': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_t-512.png', 'U': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_u-512.png', 'V': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_v-512.png', 'W': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_w-512.png', 'X': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_x-512.png', 'Y': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_y-512.png', 'Z': 'https://cdn3.iconfinder.com/data/icons/american-sign-language-asl-basics/300/minimal_ASL_basics_z-512.png'
                };

                for (let letter of letters) {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'alphabet-card p-4 rounded-lg shadow-md relative';
                    cardDiv.innerHTML = `
                        <img src="${iconMap[letter]}" alt="ASL ${letter}" class="w-16 h-16 mx-auto mb-2 object-contain">
                        <p class="text-lg font-bold text-primary">${letter}</p>
                        <button class="info-btn absolute top-1 right-1 bg-blue-500 text-white rounded-full w-6 h-6 text-xs flex items-center justify-center hover:bg-blue-600 transition-colors" data-letter="${letter}">‚ÑπÔ∏è</button>
                    `;
                    alphabetGrid.appendChild(cardDiv);
                }

                // Add event listeners for info buttons
                document.querySelectorAll('.info-btn').forEach(btn => {
                    btn.addEventListener('click', async (e) => {
                        e.stopPropagation();
                        const letter = btn.getAttribute('data-letter');
                        modalLetterEl.textContent = letter;
                        modalContentEl.textContent = 'Loading...';
                        aiGuideModal.classList.remove('hidden');
                        aiGuideModal.classList.add('flex');

                        const prompt = `How do I sign the letter "${letter}" in American Sign Language? Please provide clear, step-by-step instructions that are easy to follow for a beginner. Keep it concise but detailed enough to be helpful.`;
                        const response = await callGemini(prompt, []);
                        modalContentEl.textContent = response;
                    });
                });
            }

            // --- Event Listeners ---
            startWebcamBtnFreeform.addEventListener('click', () => startWebcam('freeform'));
            stopWebcamBtnFreeform.addEventListener('click', stopWebcam);
            startPracticeBtn.addEventListener('click', () => {
                resetPracticeStats();
                setNewChallenge();
                startWebcam('practice');
            });
            stopPracticeBtn.addEventListener('click', stopWebcam);
            nextLetterBtn.addEventListener('click', setNewChallenge);
            themeToggle.addEventListener('click', toggleTheme);
            themeToggleMobile.addEventListener('click', toggleTheme);
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            closeModalBtn.addEventListener('click', () => {
                aiGuideModal.classList.add('hidden');
                aiGuideModal.classList.remove('flex');
            });
            chatbotToggle.addEventListener('click', () => {
                chatbotContainer.classList.toggle('hidden');
                if (!chatbotContainer.classList.contains('hidden')) {
                    chatInput.focus();
                }
            });
            chatbotClose.addEventListener('click', () => {
                chatbotContainer.classList.add('hidden');
            });
            chatSend.addEventListener('click', handleChatSend);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleChatSend();
                }
            });

            // --- Initialize ---
            initTheme();
            populateAlphabetGuide();
        });
    </script>
</body>
</html>

